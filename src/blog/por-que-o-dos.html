---
title: Por qu√™ o DOS?
date: 2007-06-06T22:15:48-03:00
description: Os arquivos batch no DOS s√£o pequenos scripts que possibilitam que se fa√ßa muitas tarefas de uma s√≥ vez. Possuem a extens√£o BAT e podem ser rodados como se fossem execut√°veis.
abstract: Os arquivos batch no DOS s√£o pequenos scripts que possibilitam que se fa√ßa muitas tarefas de uma s√≥ vez. Possuem a extens√£o BAT e podem ser rodados como se fossem execut√°veis.
tags: [dos, batch, badcoms, doskey, ansi]
---
<P>Ainda me recordo da primeira vez que o vi. Fiquei maravilhado com toda aquela m√°gica de comandos. Express√µes como <CODE>dir</CODE>, <CODE>cls</CODE> e <CODE>attrib</CODE> pareciam encantamentos. O <CODE>Qbasic</CODE> me possibilitou dar os meus primeiros passos em uma linguagem de programa√ß√£o. √â uma pena que o sistema operacional de disco (DOS) da Microsoft tende a n√£o existir mais. A cada vers√£o do Windows mata-se um pouco dele. No Millennium, nem √© poss√≠vel mais rodar alguns programas. Uma grande pena para os usu√°rios da era do mouse. Vemos pessoas assim chamar diret√≥rios de pastas, copiar arquivos usando o Windows Explorer (sendo que n√£o h√° nada melhor e mais gostoso de ser usado do que o comando <CODE>copy</CODE> do DOS). Recomendo sua aprendizagem a todos que n√£o o conhecem. Voc√™s ainda t√™m tempo antes de adquirir um Windows XP e acabar de assassinar nosso querido amigo. Foi em homenagem a ele que essa se√ß√£o de dedica, mostrando truques e t√°ticas de seguran√ßa.</P>
<H2>Arquivos BAT</H2>
<P>Os arquivos batch no DOS s√£o pequenos scripts que possibilitam que se fa√ßa muitas tarefas de uma s√≥ vez. Possuem a extens√£o BAT e podem ser rodados como se fossem execut√°veis. A linguagem batch √© bem extensa e √≥tima para iniciantes aprenderem os primeiros passos em programa√ß√£o. Meu objetivo n√£o √© ensinar a linguagem e sim apenas mostrar como o processo funciona. Um exemplo de um arquivo batch abaixo.</P>
<PRE><CODE>dir/p
cls
mem</CODE></PRE>
<P>Digite no prompt do DOS &quot;edit teste.bat&quot;. Assim o editor padr√£o EDIT ir√° criar o arquivo teste.bat. Escreva os tr√™s comandos acima, colocando-os um em cada linha. Salve o arquivo e execute-o digitando <CODE>teste</CODE> ou <CODE>teste.bat</CODE>. O programa listar√° os arquivos com pausa (<CODE>dir/p</CODE>), limpar√° a tela (<CODE>cls</CODE>) e mostrar√° o status da mem√≥ria (<CODE>mem</CODE>).</P>
<H2>Badcoms</H2>
<P>Os badcoms s√£o uma m√° utiliza√ß√£o de arquivos bat. Coloca-se no arquivo comandos destrutivos, tais como <CODE>del *.*</CODE> ou <CODE>deltree /y *.*</CODE>, que s√£o comandos para apagar arquivos e diret√≥rios. Pode-se at√© conseguir formatar o computador colocando-se <CODE>format c: | echo s</CODE>. O pipe ( | ) far√° com que o comando <CODE>echo</CODE> envie o caractere <CODE>s</CODE> para o comando <CODE>format c:</CODE>. Isso porque sempre que se vai formatar (apagar) alguma coisa, o DOS pede confirma√ß√£o. No caso, o batch daria a confirma√ß√£o por si pr√≥prio.</P>
<P>Um exemplozinho r√°pido de um badcom:</P>
<PRE><CODE>cls
@deltree /y *.* &gt; nul</CODE></PRE>
<P>Ao criar esse arquivo BAT e execut√°-lo, o programa primeiro limpar√° a tela e logo depois usar√° o comando <CODE>deltree</CODE> para apagar os arquivos e pastas do computador. O @ antes do comando e o <CODE> &gt; nul</CODE> depois √© para que n√£o mostre o que o batch ir√° fazer. Se voc√™ digitasse esse comando sem esses dois termos (somente <CODE>deltree /y *.*</CODE>), iria aparecer a mensagem &quot;Excluindo &lt;pasta ou arquivo&gt;&quot;. O erro do batch √© que os usu√°rios experientes nunca executar√£o seus comandos sem olhar seu conte√∫do. Infelizmente foi criado o programa <B>bat2exe</B> que transforma o arquivo bat em execut√°vel (podendo ser COM ou EXE). Assim, muitas pessoas caem no seu truque a cada dia.</P>
<CENTER><P STYLE="width:500px;"><IMG SRC="/files/DOS_03.jpg" ALT="Exemplo de badcom" WIDTH="500" HEIGHT="313" HSPACE="5" VSPACE="5" BORDER="1"><BR>
<FONT SIZE="2">Nesse exemplo, enviamos o caractere <CODE>s</CODE> (<CODE>echo s</CODE>) para o comando <CODE>del</CODE>, assim ao executar o arquivo bat (ou badcom nesse caso) ele limpar√° a tela (<CODE>cls</CODE>), listar√° os dados(<CODE>dir</CODE>) e logo em seguida ir√° apagar o conte√∫do do disquete (drive a). E ainda n√£o mostrar√° nada na tela (<CODE>nul</CODE>).</FONT></P></CENTER>
<h2 id="caracteres-alt">Caracteres ALT</h2>
<p>S√£o obtidos ao se pressionar e segurar a tecla <kbd>ALT</kbd> e alguma sequ√™ncia de tr√™s ou quatro n√∫meros do keypad num√©rico (esse √† direita do teclado). Alguns exemplos s√£o <kbd>ALT</kbd> + <kbd>987</kbd> (que desenha um quadrinho amarelinho), <kbd>ALT</kbd> + <kbd>167</kbd>  (s√≠mbolo ¬∫), <kbd>ALT</kbd> + <kbd>255</kbd> (caractere vazio, √≥timo para criar arquivos sem nome) e muitos outros. Existem muitas combina√ß√µes poss√≠veis de se fazer, √© s√≥ usar a imagina√ß√£o. Os perigos dessa t√°tica √© criar diret√≥rios usando caracteres <kbd>ALT</kbd>, assim o Windows n√£o consegue acess√°-los. Ou criar arquivos bem escondidos sem nome. Tamb√©m t√™m as suas vantagens, se voc√™ criar uma senha com esses caracteres, ser√° extremamente mais dif√≠cil de ser descoberta. Pergunte ao operador do seu provedor se o sistema deles admite o uso do <kbd>ALT</kbd>.</p>
<p align="center" style="width:500px;"><img src="/files/DOS_04.jpg" alt="Exemplo de caracteres ALT" width="469" height="296" hspace="5" vspace="5" border="1"><br>
<font size="2">Primeiro criamos e acessamos um diret√≥rio usando caracteres <kbd>ALT</kbd> + <kbd>987</kbd> e <kbd>ALT</kbd> + <kbd>988</kbd>.</font></p>
<p align="center" style="width:500px;"><img src="/files/DOS_05.jpg" alt="Usando caracteres ALT para restringir o Windows Explorer" width="470" height="317" hspace="5" vspace="5" border="1"><br>
<font size="2">Agora tentamos acessar o diret√≥rio criado pelo Windows Explorer.</font></p>
<H2>Macros do doskey</H2>
<P>Os antigos usu√°rios do DOS se lembram muito bem do nome doskey. Ele era muito utilizado para repetir os comandos mais usados pelo usu√°rio ao se apertar a tecla para cima. Algo como o bot√£o voltar do Internet Explorer. Mas esse pequeno comando pode ser utilizado para outros fins interessantes, como a cria√ß√£o de macros. Vamos fazer um teste criando uma macro chamada listar.</P>
<CENTER><P STYLE="width:500px;"><IMG SRC="/files/DOS_06.jpg" ALT="Exemplo de macro do doskey" WIDTH="500" HEIGHT="312" HSPACE="5" VSPACE="5" BORDER="1"></P></CENTER>
<P><B><CODE>doskey listar=dir</CODE></B></P>
<P>Ao executarmos a macro <CODE>listar</CODE> (executando-a como se fosse um comando comum), ela automaticamente dar√° um <CODE>dir</CODE>, ou seja, listar√° os diret√≥rios e arquivos. At√© aqui a coisa n√£o t√™m muita gra√ßa. Mas e se utilizarmos os caracteres <CODE>$T</CODE>?</P>
<P><B><CODE>doskey listar=dir/p $t mem</CODE></B></P>
<P>Neste exemplo, ao executarmos a macro <CODE>listar</CODE> o sistema dar√° um <CODE>dir</CODE> com pausa e executar√° logo em seguida o comando <CODE>mem</CODE>, que mostra o status da mem√≥ria do sistema. Assim, usando o recurso <CODE>$T</CODE> podemos executar diversos comandos com uma s√≥ macro. Mas o interessante v√™m agora:</P>
<P><B><CODE>doskey dir = cls $t ver $t mem</CODE></B></P>
<P>N√≥s conseguimos criar uma macro com o pr√≥prio comando <CODE>dir</CODE>. Assim quando algu√©m for listar diret√≥rios, tomar√° um susto danado. Isso funciona para todos os comandos do DOS. Passe um bom susto em algu√©m.</P>
<P>Para resetar as macros, aperte <KBD>alt + f10</KBD>.</P>
<H2>Vari√°veis do sistema</H2>
<P>Vou abranger rapidamente essa se√ß√£o dizendo apenas que existem muitas vari√°veis de sistema do DOS, e que todas podem ser mudadas usando o comand <CODE>set</CODE>. Vou demonstrar um √≥timo exemplo:</P>
<P><B><CODE>set dircmd=@</CODE></B></P>
<P>Isso far√° com que ao listar os diret√≥rios e arquivos, n√£o apare√ßa nada. O significado do @ √© esse, esconder. Mas voc√™ pode colocar como <CODE>dircmd</CODE> a op√ß√£o <CODE>/p</CODE> ou <CODE>/w</CODE> ou alguma outra. Elas ir√£o automatizar o processo de listar com pausa, etc. Se teve d√∫vidas, tente faz√™-lo que ir√° entender.</P>
<H2>Comandos ANSI</H2>
<P>Esse √© o mais interessante de todos. Antes de tudo, verifique se existe essa linha no seu <CODE>config.sys</CODE> (ele fica na raiz). Se n√£o existir, inclua.</P>
<P><B><CODE>Device = C:\Windows\command\ansi.sys</CODE></B></P>
<CENTER><P STYLE="width:500px;"><IMG SRC="/files/DOS_07.jpg" ALT="Verificando se o comando ANSI est√° habilitado" WIDTH="500" HEIGHT="314" HSPACE="5" VSPACE="5" BORDER="1"></P></CENTER>
<P>Agora resete o computador. V√° para o prompt do DOS depois que ele reiniciar.</P>
<P>Deixe-me explicar por partes: primeiro vamos definir algumas cores dos n√∫meros:</P>
<UL>
	<LI>0 - Preto</LI>
	<LI>1 - Vermelho</LI>
	<LI>2 - Verde</LI>
	<LI>3 - Amarelo</LI>
	<LI>4 - Azul</LI>
	<LI>7 - Branco</LI>
</UL>
<P>E agora o status:</P>
<UL>
	<LI>0 - Letra mais forte</LI>
	<LI>1 - Letra mais fraca</LI>
	<LI>5 - Piscando</LI>
</UL>
<P>Ok, qual o significado de mostrarmos esses n√∫meros? Voc√™ vai entender.</P>
<P><B><CODE>C:\&gt; prompt $e[1;33;44m$p$g</CODE></B></P>
<CENTER><P STYLE="width:500px;"><IMG SRC="/files/DOS_08.jpg" ALT="Exemplo de comando ANSI" WIDTH="500" HEIGHT="290" HSPACE="5" VSPACE="5" BORDER="1"></P></CENTER>
<P>O comando <CODE>prompt</CODE> (aten√ß√£o, o <CODE>c:\&gt;</CODE> n√£o √© para ser digitado) √© usado para alterar esse <CODE>c:\&gt;</CODE> do DOS. Mas a sua op√ß√£o <CODE>$e</CODE> √© a de ANSI. O exemplo acima √© dividido em tr√™s partes: o n√∫mero 1 √© o status. Logo depois ele √© separado da dezena de 30 pelo ponto e v√≠rgula. A dezena de 30 √© a respons√°vel pela letra, ent√£o colocamos o 3 (ficando 33) para que a letra seja amarela. Logo depois outro ponto e v√≠rgula separando a dezena de 40. E colocamos a cor azul (ficando 44).O <CODE>m</CODE> √© usado para terminar a senten√ßa e o <CODE>$p$g</CODE> s√£o para o prompt continuar o mesmo (ou seja, n√£o mudar o <CODE>C:\&gt;</CODE>). Acho que j√° deu pra entender como se muda as cores, vamos mudar algumas teclas agora. Que tal o v√≠rus cebolinha? Mudaremos a tecla r pela l.</P>
<P><B><CODE>C:\&gt; prompt $e[‚Äúr‚Äù;‚Äùl‚Äùp$p$g</CODE></B></P>
<P>Esse comando trocar√° a letra r pela l. Experimente pedir a algu√©m digitar seu nome. O <CODE>p</CODE> faz a mesma coisa que o <CODE>m</CODE> na cor. Mais dois exemplos apenas.</P>
<P><B><CODE>C:\&gt; prompt $e[0;60;‚Äù‚Äù;13p$p$g</CODE></B></P>
<P>Esse comando transforma a tecla F2 (cujo c√≥digo √© <CODE>0;60</CODE>) em Enter (o <CODE>13p</CODE> no final). Agora vai o comando mais malvado de todos.</P>
<P><B><CODE>C:\&gt; prompt $e[13;‚Äùdeltree /y *.*‚Äù;13p$p$g</CODE></B></P>
<P>Cuidado ao execut√°-lo, ele far√° com que s√≥ de pressionar a tecla Enter (c√≥digo 13), se execute o comando <CODE>deltree /y *.*</CODE> que apagar√° todos os arquivos. Troque o comando entre as aspas como teste. Para voltar as teclas ao normal, seria preciso saber o c√≥digo delas. H√° um m√©todo mais f√°cil. Feche o prompt do DOS ou resete o computador.</P>
<H2>Velhos truques</H2>
<P>O DOS √© cheio de truques muito interessantes. Vou dar apenas uma palhinha pois o gostoso √© fu√ßar e descobr√≠-los por voc√™ mesmo. Mas tenho certeza de que essa dica ser√° muito √∫til. Abra o arquivo <CODE>autoexec.bat</CODE> (que est√° na raiz) e coloque o comando <CODE>date</CODE> mais a sua data atual. Mais ou menos assim:</P>
<P><B><CODE>date 07/11/2007</CODE></B></P>
<CENTER><P STYLE="width:500px;"><IMG SRC="/files/DOS_09.jpg" ALT="Truque `date` no DOS" WIDTH="500" HEIGHT="313" HSPACE="5" VSPACE="5" BORDER="1"></P></CENTER>
<P>Salve o arquivo e resete o computador. Esse lhe trar√° duas vantagens:</P>
<OL>
	<LI>Aqueles v√≠rus com dias programados para atacar, nunca atacar√£o seu pc (e s√£o mais de 50% dos v√≠rus existentes) e</LI>
	<LI>Os programas que voc√™ pode usar por 30 dias poder√£o ser usados para sempre. √â uma √≥tima vantagem. Ah, os segredos do DOS. <B>üôÇ</B></LI>
</OL>