<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<META HTTP-EQUIV=Content-Type CONTENT="text/html; charset=utf-8">
<META HTTP-EQUIV=Content-Language CONTENT=pt-br>
<META NAME=language CONTENT=pt-BR>
<TITLE>Por qu√™ o DOS? &mdash; Victor Ferreira&#39;s Homepage</TITLE>
<META NAME=description CONTENT="Ainda me recordo da primeira vez que o vi. Fiquei maravilhado com toda aquela m√°gica de comandos. Express√µes como dir, cls e attrib pareciam encantamentos. O Qbasic me possibilitou dar os meus primeiros passos em‚Ä¶">
<META NAME=keywords CONTENT="Victor Ferreira, homepage, blog, artigos, notas, MS-DOS, comandos">
<META NAME=abstract CONTENT="Ainda me recordo da primeira vez que o vi. Fiquei maravilhado com toda aquela m√°gica de comandos. Express√µes como dir, cls e attrib pareciam encantamentos. O Qbasic me possibilitou dar os meus primeiros passos em‚Ä¶">
<META NAME=author CONTENT="Victor Ferreira">
<META NAME=robots CONTENT="index, follow">
<LINK REL="shortcut icon" HREF=/favicon.ico>
<BGSOUND SRC=/files/sound001.mid LOOP="infinite">
</HEAD>
<BODY LINK=#3CFF00 ALINK=#3CFF00 VLINK=#3CFF00 BGCOLOR=#202020 BACKGROUND=/files/background_slate.gif>
<FONT FACE="Verdana, Arial, Helvetica, sans-serif" COLOR=#3CFF00 SIZE=2>
<DIV><A HREF=/ >Victor Ferreira&#39;s Homepage</A></DIV>
<P><IMG SRC=/files/linha01.gif WIDTH=765 HEIGHT=30></P>
<H1>Por qu√™ o DOS?</H1>
<P><I><FONT SIZE=1>quarta-feira, 6 de junho de 2007</FONT></I></P>
<p>Ainda me recordo da primeira vez que o vi. Fiquei maravilhado com toda aquela m√°gica de comandos. Express√µes como <code>dir</code>, <code>cls</code> e <code>attrib</code> pareciam encantamentos. O <code>Qbasic</code> me possibilitou dar os meus primeiros passos em uma linguagem de programa√ß√£o. √â uma pena que o sistema operacional de disco (DOS) da Microsoft tende a n√£o existir mais. A cada vers√£o do Windows mata-se um pouco dele. No Millennium, nem √© poss√≠vel mais rodar alguns programas. Uma grande pena para os usu√°rios da era do mouse. Vemos pessoas assim chamar diret√≥rios de pastas, copiar arquivos usando o Windows Explorer (sendo que n√£o h√° nada melhor e mais gostoso de ser usado do que o comando <code>copy</code> do DOS). Recomendo sua aprendizagem a todos que n√£o o conhecem. Voc√™s ainda t√™m tempo antes de adquirir um Windows XP e acabar de assassinar nosso querido amigo. Foi em homenagem a ele que essa se√ß√£o de dedica, mostrando truques e t√°ticas de seguran√ßa.</p>
<h2>Arquivos BAT</h2>
<p>Os arquivos batch no DOS s√£o pequenos scripts que possibilitam que se fa√ßa muitas tarefas de uma s√≥ vez. Possuem a extens√£o BAT e podem ser rodados como se fossem execut√°veis. A linguagem batch √© bem extensa e √≥tima para iniciantes aprenderem os primeiros passos em programa√ß√£o. Meu objetivo n√£o √© ensinar a linguagem e sim apenas mostrar como o processo funciona. Um exemplo de um arquivo batch abaixo.</p>
<pre><code>dir/p
cls
mem</code></pre>
<p>Digite no prompt do DOS "edit teste.bat". Assim o editor padr√£o EDIT ir√° criar o arquivo teste.bat. Escreva os tr√™s comandos acima, colocando-os um em cada linha. Salve o arquivo e execute-o digitando <code>teste</code> ou <code>teste.bat</code>. O programa listar√° os arquivos com pausa (<code>dir/p</code>), limpar√° a tela (<code>cls</code>) e mostrar√° o status da mem√≥ria (<code>mem</code>).</p>
<h2>Badcoms</h2>
<p>Os badcoms s√£o uma m√° utiliza√ß√£o de arquivos bat. Coloca-se no arquivo comandos destrutivos, tais como <code>del *.*</code> ou <code>deltree /y *.*</code>, que s√£o comandos para apagar arquivos e diret√≥rios. Pode-se at√© conseguir formatar o computador colocando-se <code>format c: | echo s</code>. O pipe ( | ) far√° com que o comando <code>echo</code> envie o caractere <code>s</code> para o comando <code>format c:</code>. Isso porque sempre que se vai formatar (apagar) alguma coisa, o DOS pede confirma√ß√£o. No caso, o batch daria a confirma√ß√£o por si pr√≥prio.</p>
<p>Um exemplozinho r√°pido de um badcom:</p>
<pre><code>cls
@deltree /y *.* &gt; nul</code></pre>
<p>Ao criar esse arquivo BAT e execut√°-lo, o programa primeiro limpar√° a tela e logo depois usar√° o comando <code>deltree</code> para apagar os arquivos e pastas do computador. O @ antes do comando e o <code>&gt; nul</code> depois √© para que n√£o mostre o que o batch ir√° fazer. Se voc√™ digitasse esse comando sem esses dois termos (somente <code>deltree /y *.*</code>), iria aparecer a mensagem "Excluindo &lt;pasta ou arquivo&gt;". O erro do batch √© que os usu√°rios experientes nunca executar√£o seus comandos sem olhar seu conte√∫do. Infelizmente foi criado o programa <b>bat2exe</b> que transforma o arquivo bat em execut√°vel (podendo ser COM ou EXE). Assim, muitas pessoas caem no seu truque a cada dia.</p>
<center><p style=width:500px;><img src=/files/DOS_03.jpg alt="Exemplo de badcom" width=500 height=313 hspace=5 vspace=5 border=1><br>
<font size=2>Nesse exemplo, enviamos o caractere <code>s</code> (<code>echo s</code>) para o comando <code>del</code>, assim ao executar o arquivo bat (ou badcom nesse caso) ele limpar√° a tela (<code>cls</code>), listar√° os dados(<code>dir</code>) e logo em seguida ir√° apagar o conte√∫do do disquete (drive a). E ainda n√£o mostrar√° nada na tela (<code>nul</code>).</font></p></center>
<h2>Macros do doskey</h2>
<p>Os antigos usu√°rios do DOS se lembram muito bem do nome doskey. Ele era muito utilizado para repetir os comandos mais usados pelo usu√°rio ao se apertar a tecla para cima. Algo como o bot√£o voltar do Internet Explorer. Mas esse pequeno comando pode ser utilizado para outros fins interessantes, como a cria√ß√£o de macros. Vamos fazer um teste criando uma macro chamada listar.</p>
<center><p style=width:500px;><img src=/files/DOS_06.jpg alt="Exemplo de macro do doskey" width=500 height=312 hspace=5 vspace=5 border=1></p></center>
<p><b><code>doskey listar=dir</code></b></p>
<p>Ao executarmos a macro <code>listar</code> (executando-a como se fosse um comando comum), ela automaticamente dar√° um <code>dir</code>, ou seja, listar√° os diret√≥rios e arquivos. At√© aqui a coisa n√£o t√™m muita gra√ßa. Mas e se utilizarmos os caracteres <code>$T</code>?</p>
<p><b><code>doskey listar=dir/p $t mem</code></b></p>
<p>Neste exemplo, ao executarmos a macro <code>listar</code> o sistema dar√° um <code>dir</code> com pausa e executar√° logo em seguida o comando <code>mem</code>, que mostra o status da mem√≥ria do sistema. Assim, usando o recurso <code>$T</code> podemos executar diversos comandos com uma s√≥ macro. Mas o interessante v√™m agora:</p>
<p><b><code>doskey dir = cls $t ver $t mem</code></b></p>
<p>N√≥s conseguimos criar uma macro com o pr√≥prio comando <code>dir</code>. Assim quando algu√©m for listar diret√≥rios, tomar√° um susto danado. Isso funciona para todos os comandos do DOS. Passe um bom susto em algu√©m.</p>
<p>Para resetar as macros, aperte <kbd>alt + f10</kbd>.</p>
<h2>Vari√°veis do sistema</h2>
<p>Vou abranger rapidamente essa se√ß√£o dizendo apenas que existem muitas vari√°veis de sistema do DOS, e que todas podem ser mudadas usando o comand <code>set</code>. Vou demonstrar um √≥timo exemplo:</p>
<p><b><code>set dircmd=@</code></b></p>
<p>Isso far√° com que ao listar os diret√≥rios e arquivos, n√£o apare√ßa nada. O significado do @ √© esse, esconder. Mas voc√™ pode colocar como <code>dircmd</code> a op√ß√£o <code>/p</code> ou <code>/w</code> ou alguma outra. Elas ir√£o automatizar o processo de listar com pausa, etc. Se teve d√∫vidas, tente faz√™-lo que ir√° entender.</p>
<h2>Comandos ANSI</h2>
<p>Esse √© o mais interessante de todos. Antes de tudo, verifique se existe essa linha no seu <code>config.sys</code> (ele fica na raiz). Se n√£o existir, inclua.</p>
<p><b><code>Device = C:\Windows\command\ansi.sys</code></b></p>
<center><p style=width:500px;><img src=/files/DOS_07.jpg alt="Verificando se o comando ANSI est√° habilitado" width=500 height=314 hspace=5 vspace=5 border=1></p></center>
<p>Agora resete o computador. V√° para o prompt do DOS depois que ele reiniciar.</p>
<p>Deixe-me explicar por partes: primeiro vamos definir algumas cores dos n√∫meros:</p>
<ul>
<li>0 - Preto</li>
<li>1 - Vermelho</li>
<li>2 - Verde</li>
<li>3 - Amarelo</li>
<li>4 - Azul</li>
<li>7 - Branco</li>
</ul>
<p>E agora o status:</p>
<ul>
<li>0 - Letra mais forte</li>
<li>1 - Letra mais fraca</li>
<li>5 - Piscando</li>
</ul>
<p>Ok, qual o significado de mostrarmos esses n√∫meros? Voc√™ vai entender.</p>
<p><b><code>C:\&gt; prompt $e[1;33;44m$p$g</code></b></p>
<center><p style=width:500px;><img src=/files/DOS_08.jpg alt="Exemplo de comando ANSI" width=500 height=290 hspace=5 vspace=5 border=1></p></center>
<p>O comando <code>prompt</code> (aten√ß√£o, o <code>c:\&gt;</code> n√£o √© para ser digitado) √© usado para alterar esse <code>c:\&gt;</code> do DOS. Mas a sua op√ß√£o <code>$e</code> √© a de ANSI. O exemplo acima √© dividido em tr√™s partes: o n√∫mero 1 √© o status. Logo depois ele √© separado da dezena de 30 pelo ponto e v√≠rgula. A dezena de 30 √© a respons√°vel pela letra, ent√£o colocamos o 3 (ficando 33) para que a letra seja amarela. Logo depois outro ponto e v√≠rgula separando a dezena de 40. E colocamos a cor azul (ficando 44).O <code>m</code> √© usado para terminar a senten√ßa e o <code>$p$g</code> s√£o para o prompt continuar o mesmo (ou seja, n√£o mudar o <code>C:\&gt;</code>). Acho que j√° deu pra entender como se muda as cores, vamos mudar algumas teclas agora. Que tal o v√≠rus cebolinha? Mudaremos a tecla r pela l.</p>
<p><b><code>C:\&gt; prompt $e[‚Äúr‚Äù;‚Äùl‚Äùp$p$g</code></b></p>
<p>Esse comando trocar√° a letra r pela l. Experimente pedir a algu√©m digitar seu nome. O <code>p</code> faz a mesma coisa que o <code>m</code> na cor. Mais dois exemplos apenas.</p>
<p><b><code>C:\&gt; prompt $e[0;60;‚Äù‚Äù;13p$p$g</code></b></p>
<p>Esse comando transforma a tecla F2 (cujo c√≥digo √© <code>0;60</code>) em Enter (o <code>13p</code> no final). Agora vai o comando mais malvado de todos.</p>
<p><b><code>C:\&gt; prompt $e[13;‚Äùdeltree /y *.*‚Äù;13p$p$g</code></b></p>
<p>Cuidado ao execut√°-lo, ele far√° com que s√≥ de pressionar a tecla Enter (c√≥digo 13), se execute o comando <code>deltree /y *.*</code> que apagar√° todos os arquivos. Troque o comando entre as aspas como teste. Para voltar as teclas ao normal, seria preciso saber o c√≥digo delas. H√° um m√©todo mais f√°cil. Feche o prompt do DOS ou resete o computador.</p>
<h2>Velhos truques</h2>
<p>O DOS √© cheio de truques muito interessantes. Vou dar apenas uma palhinha pois o gostoso √© fu√ßar e descobr√≠-los por voc√™ mesmo. Mas tenho certeza de que essa dica ser√° muito √∫til. Abra o arquivo <code>autoexec.bat</code> (que est√° na raiz) e coloque o comando <code>date</code> mais a sua data atual. Mais ou menos assim:</p>
<p><b><code>date 07/11/2007</code></b></p>
<center><p style=width:500px;><img src=/files/DOS_09.jpg alt="Truque `date` no DOS" width=500 height=313 hspace=5 vspace=5 border=1></p></center>
<p>Salve o arquivo e resete o computador. Esse lhe trar√° duas vantagens:</p>
<ol>
<li>Aqueles v√≠rus com dias programados para atacar, nunca atacar√£o seu pc (e s√£o mais de 50% dos v√≠rus existentes) e</li>
<li>Os programas que voc√™ pode usar por 30 dias poder√£o ser usados para sempre. √â uma √≥tima vantagem. Ah, os segredos do DOS. <b>üôÇ</b></li>
</ol>
<P><IMG SRC=/files/linha01.gif WIDTH=765 HEIGHT=30></P>
<p><A HREF=http://www.free-stuff.me.uk/free/voucher_codes/ TARGET=_blank><IMG SRC="http://001.c-o-u-n-t.com/count-016.pl?count=0a07xg5dgnmty32t8swk&type=odmeter1&prog=hit" WIDTH=95 HEIGHT=22 BORDER=0 ALT="voucher codes" TITLE="voucher codes"></A></p>
<p><a href="http://webquiz.hypermart.net/cgi-bin/counter/counter_stat.cgi?ID=victorferreira" target=_top><script><!--
		document.write("<img border=0 src=http://webquiz.hypermart.net/cgi-bin/counter/counter.cgi?ID=victorferreira&DIGIT=4&REF=");document.write(escape(parent.document.referrer));document.write(">");// --></script><img border=0 src="http://webquiz.hypermart.net/cgi-bin/counter/counter.cgi?ID=victorferreira&amp;DIGIT=4&amp;REF=</template" lwl38x8ud="">&gt;<img border=0 src="http://webquiz.hypermart.net/cgi-bin/counter/counter.cgi?ID=victorferreira&amp;DIGIT=3" lwl38x8ud=""><img border=0 src="http://webquiz.hypermart.net/cgi-bin/counter/counter.cgi?ID=victorferreira&amp;DIGIT=2" lwl38x8ud=""><img border=0 src="http://webquiz.hypermart.net/cgi-bin/counter/counter.cgi?ID=victorferreira&amp;DIGIT=1" lwl38x8ud=""><img border=0 src="http://webquiz.hypermart.net/cgi-bin/counter/counter.cgi?ID=victorferreira&amp;DIGIT=0" lwl38x8ud=""><br>Estat√≠sticas</a></p>
<p><img border=0 src=/files/Linux.gif width=88 height=31></p>
<P><I><FONT SIZE=1>Copyright &copy; 2007 Victor Ferreira - victorotavioferreira@hotmail.com</FONT></I></P>
</FONT>
</BODY>
</HTML>